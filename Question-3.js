// 3. Find all the company drives and students who are appeared for the placement

// Query

db.companyDrives.aggregate([
  {
    $lookup: {
      from: "attendance",
      localField: "date",
      foreignField: "date",
      as: "attendance_info",
    },
  },
  { $match: { "attendance_info.status": "Present" } },
]);

// OUTPUT
[
  {
    _id: 1,
    name: "Google",
    date: ISODate("2020-10-21T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fca"),
        userID: 1,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fcb"),
        userID: 2,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fcc"),
        userID: 3,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fcd"),
        userID: 4,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fce"),
        userID: 5,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fcf"),
        userID: 6,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fd1"),
        userID: 8,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fd2"),
        userID: 9,
        date: ISODate("2020-10-21T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 2,
    name: "Amazon",
    date: ISODate("2020-10-25T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fde"),
        userID: 1,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fdf"),
        userID: 2,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe0"),
        userID: 3,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe1"),
        userID: 4,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe2"),
        userID: 5,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe3"),
        userID: 6,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe4"),
        userID: 7,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe5"),
        userID: 8,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe6"),
        userID: 9,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe7"),
        userID: 10,
        date: ISODate("2020-10-25T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 3,
    name: "Guvi",
    date: ISODate("2020-10-27T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe8"),
        userID: 1,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fe9"),
        userID: 2,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fea"),
        userID: 3,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1feb"),
        userID: 4,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fed"),
        userID: 6,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fef"),
        userID: 8,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff0"),
        userID: 9,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff1"),
        userID: 10,
        date: ISODate("2020-10-27T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 4,
    name: "Zoho",
    date: ISODate("2020-10-28T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff2"),
        userID: 1,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff4"),
        userID: 3,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff5"),
        userID: 4,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff6"),
        userID: 5,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff7"),
        userID: 6,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ff9"),
        userID: 8,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ffa"),
        userID: 9,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ffb"),
        userID: 10,
        date: ISODate("2020-10-28T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 5,
    name: "TCS",
    date: ISODate("2020-10-29T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ffc"),
        userID: 1,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ffd"),
        userID: 2,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1ffe"),
        userID: 3,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f1fff"),
        userID: 4,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2000"),
        userID: 5,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2001"),
        userID: 6,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2002"),
        userID: 7,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2003"),
        userID: 8,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2004"),
        userID: 9,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2005"),
        userID: 10,
        date: ISODate("2020-10-29T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 6,
    name: "Wipro",
    date: ISODate("2020-10-30T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f2006"),
        userID: 1,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2007"),
        userID: 2,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2009"),
        userID: 4,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f200a"),
        userID: 5,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f200b"),
        userID: 6,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f200c"),
        userID: 7,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f200d"),
        userID: 8,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f200e"),
        userID: 9,
        date: ISODate("2020-10-30T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 7,
    name: "IppoPay",
    date: ISODate("2020-10-31T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f2010"),
        userID: 1,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2012"),
        userID: 3,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2013"),
        userID: 4,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2014"),
        userID: 5,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2015"),
        userID: 6,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2016"),
        userID: 7,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2017"),
        userID: 8,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2018"),
        userID: 9,
        date: ISODate("2020-10-31T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 8,
    name: "Infosys",
    date: ISODate("2020-11-01T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f201a"),
        userID: 1,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f201b"),
        userID: 2,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f201c"),
        userID: 3,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f201d"),
        userID: 4,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f201e"),
        userID: 5,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f201f"),
        userID: 6,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2021"),
        userID: 8,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2023"),
        userID: 10,
        date: ISODate("2020-11-01T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 9,
    name: "CTS",
    date: ISODate("2020-11-02T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f2024"),
        userID: 1,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2025"),
        userID: 2,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2026"),
        userID: 3,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2028"),
        userID: 5,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2029"),
        userID: 6,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f202a"),
        userID: 7,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f202b"),
        userID: 8,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f202c"),
        userID: 9,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
    ],
  },
  {
    _id: 10,
    name: "LNT",
    date: ISODate("2020-11-02T00:00:00Z"),
    attendance_info: [
      {
        _id: ObjectId("65040e6b73ed9405ff6f2024"),
        userID: 1,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2025"),
        userID: 2,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2026"),
        userID: 3,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2028"),
        userID: 5,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f2029"),
        userID: 6,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f202a"),
        userID: 7,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f202b"),
        userID: 8,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
      {
        _id: ObjectId("65040e6b73ed9405ff6f202c"),
        userID: 9,
        date: ISODate("2020-11-02T00:00:00Z"),
        status: "Present",
      },
    ],
  },
];
